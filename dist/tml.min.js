var d=function(i,t,n,o){var m;t[0]=0;for(var e=1;e<t.length;e++){var s=t[e++],c=t[e]?(t[0]|=s?1:2,n[t[e++]]):t[++e];s===3?o[0]=c:s===4?o[1]=Object.assign(o[1]||{},c):s===5?(o[1]=o[1]||{})[t[++e]]=c:s===6?o[1][t[++e]]+=c+"":s?(m=i.apply(c,d(i,c,n,["",null])),o.push(m),c[0]?t[0]|=2:(t[e-2]=0,t[e]=m)):o.push(c)}return o},h=new Map;function E(i){var t=h.get(this);return t||(t=new Map,h.set(this,t)),(t=d(this,t.get(i)||(t.set(i,t=function(n){for(var o,m,e=1,s="",c="",r=[0],l=function(u){e===1&&(u||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,u,s):e===3&&(u||s)?(r.push(3,u,s),e=2):e===2&&s==="..."&&u?r.push(4,u,0):e===2&&s&&!u?r.push(5,0,!0,s):e>=5&&((s||!u&&e===5)&&(r.push(e,0,s,m),e=6),u&&(r.push(e,u,0,m),e=6)),s=""},a=0;a<n.length;a++){a&&(e===1&&l(),l(a));for(var p=0;p<n[a].length;p++)o=n[a][p],e===1?o==="<"?(l(),r=[r],e=3):s+=o:e===4?s==="--"&&o===">"?(e=1,s=""):s=o+s[0]:c?o===c?c="":s+=o:o==='"'||o==="'"?c=o:o===">"?(l(),e=1):e&&(o==="="?(e=5,m=s,s=""):o==="/"&&(e<5||n[a][p+1]===">")?(l(),e===3&&(r=r[0]),e=r,(r=r[0]).push(2,0,e),e=0):o===" "||o==="	"||o===`
`||o==="\r"?(l(),e=2):s+=o),e===3&&s==="!--"&&(e=4,r=r[0])}return l(),r}(i)),t),arguments,[])).length>1?t:t[0]}var b=(i,t,...n)=>(t===null&&(t={}),{tag:i,props:t,children:n});var v=E.bind(b);var x=(i,t)=>{for(let n in t)n[0]===":"?i.addEventListener(n.slice(1),t[n]):i.setAttribute(n,t[n]);return i};function f(i){return i.map(t=>{if(typeof t=="object")if(Array.isArray(t)){let n=document.createDocumentFragment();if(t.length>=1){let o=f(t);for(let m of o)n.appendChild(m)}return n}else{let n=document.createElement(t.tag);if(n=x(n,t.props),t.children.length>=1){let o=f(t.children);for(let m of o)n.appendChild(m)}return n}else{let n=document.createDocumentFragment();return n.textContent=t,n}})}var g=i=>{let t;i.tag===""?t=document.createDocumentFragment():t=document.createElement(i.tag),t=x(t,i.props);for(let n of f(i.children))t.appendChild(n);return t};var j=class extends HTMLElement{state={};root=this.attachShadow({mode:"open"});props={};constructor(){super();for(let n of this.getAttributeNames())this.props[n]=this.getAttribute(n);let t=this.init();for(let n in t)Object.defineProperty(this,n,{get:()=>this.state[n],set:o=>{this.state[n]=o,this.assign()}}),this[n]=t[n];this.assign()}assign(){this.root.innerHTML="",this.root.appendChild(g(this.render()))}init(){return{}}render(){}};export{v as $,j as TMLElement,g as compile};
