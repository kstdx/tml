var g=function(i,t,n,o){var a;t[0]=0;for(var e=1;e<t.length;e++){var s=t[e++],c=t[e]?(t[0]|=s?1:2,n[t[e++]]):t[++e];s===3?o[0]=c:s===4?o[1]=Object.assign(o[1]||{},c):s===5?(o[1]=o[1]||{})[t[++e]]=c:s===6?o[1][t[++e]]+=c+"":s?(a=i.apply(c,g(i,c,n,["",null])),o.push(a),c[0]?t[0]|=2:(t[e-2]=0,t[e]=a)):o.push(c)}return o},h=new Map;function E(i){var t=h.get(this);return t||(t=new Map,h.set(this,t)),(t=g(this,t.get(i)||(t.set(i,t=function(n){for(var o,a,e=1,s="",c="",r=[0],m=function(l){e===1&&(l||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,l,s):e===3&&(l||s)?(r.push(3,l,s),e=2):e===2&&s==="..."&&l?r.push(4,l,0):e===2&&s&&!l?r.push(5,0,!0,s):e>=5&&((s||!l&&e===5)&&(r.push(e,0,s,a),e=6),l&&(r.push(e,l,0,a),e=6)),s=""},u=0;u<n.length;u++){u&&(e===1&&m(),m(u));for(var f=0;f<n[u].length;f++)o=n[u][f],e===1?o==="<"?(m(),r=[r],e=3):s+=o:e===4?s==="--"&&o===">"?(e=1,s=""):s=o+s[0]:c?o===c?c="":s+=o:o==='"'||o==="'"?c=o:o===">"?(m(),e=1):e&&(o==="="?(e=5,a=s,s=""):o==="/"&&(e<5||n[u][f+1]===">")?(m(),e===3&&(r=r[0]),e=r,(r=r[0]).push(2,0,e),e=0):o===" "||o==="	"||o===`
`||o==="\r"?(m(),e=2):s+=o),e===3&&s==="!--"&&(e=4,r=r[0])}return m(),r}(i)),t),arguments,[])).length>1?t:t[0]}var b=(i,t,...n)=>(t===null&&(t={}),{tag:i,props:t,children:n}),v=E.bind(b);var x=(i,t)=>{for(let n in t)n[0]==="@"?i.addEventListener(n.slice(1),t[n]):i.setAttribute(n,t[n]);return i};function p(i){return i.map(t=>{if(typeof t=="object")if(Array.isArray(t)){let n=document.createDocumentFragment();if(t.length>=1){let o=p(t);for(let a of o)n.appendChild(a)}return n}else{let n=document.createElement(t.tag);if(n=x(n,t.props),t.children.length>=1){let o=p(t.children);for(let a of o)n.appendChild(a)}return n}else{let n=document.createDocumentFragment();return n.textContent=t,n}})}var d=i=>{let t;i.tag===""?t=document.createDocumentFragment():t=document.createElement(i.tag),t=x(t,i.props);for(let n of p(i.children))t.appendChild(n);return t};var y=class extends HTMLElement{state={};root=this.attachShadow({mode:"open"});props={};constructor(){super();for(let n of this.getAttributeNames())this.props[n]=this.getAttribute(n);let t=this.init();for(let n in t)Object.defineProperty(this,n,{get:()=>this.state[n],set:async o=>{this.state[n]=o,await this.assign()}}),this[n]=t[n]}async connectedCallback(){await this.effect(),await this.assign()}async assign(){let t=await this.render();this.root.innerHTML="",this.root.appendChild(d(t))}init(){return{}}effect(){}render(){}};export{v as $,y as TMLElement,d as compile,b as tag};
