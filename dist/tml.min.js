var v=Object.defineProperty;var C=(o,t,n)=>t in o?v(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var h=(o,t,n)=>(C(o,typeof t!="symbol"?t+"":t,n),n);var y=function(o,t,n,e){var c;t[0]=0;for(var s=1;s<t.length;s++){var i=t[s++],a=t[s]?(t[0]|=i?1:2,n[t[s++]]):t[++s];i===3?e[0]=a:i===4?e[1]=Object.assign(e[1]||{},a):i===5?(e[1]=e[1]||{})[t[++s]]=a:i===6?e[1][t[++s]]+=a+"":i?(c=o.apply(a,y(o,a,n,["",null])),e.push(c),a[0]?t[0]|=2:(t[s-2]=0,t[s]=c)):e.push(a)}return e},E=new Map;function x(o){var t=E.get(this);return t||(t=new Map,E.set(this,t)),(t=y(this,t.get(o)||(t.set(o,t=function(n){for(var e,c,s=1,i="",a="",r=[0],m=function(u){s===1&&(u||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,u,i):s===3&&(u||i)?(r.push(3,u,i),s=2):s===2&&i==="..."&&u?r.push(4,u,0):s===2&&i&&!u?r.push(5,0,!0,i):s>=5&&((i||!u&&s===5)&&(r.push(s,0,i,c),s=6),u&&(r.push(s,u,0,c),s=6)),i=""},f=0;f<n.length;f++){f&&(s===1&&m(),m(f));for(var l=0;l<n[f].length;l++)e=n[f][l],s===1?e==="<"?(m(),r=[r],s=3):i+=e:s===4?i==="--"&&e===">"?(s=1,i=""):i=e+i[0]:a?e===a?a="":i+=e:e==='"'||e==="'"?a=e:e===">"?(m(),s=1):s&&(e==="="?(s=5,c=i,i=""):e==="/"&&(s<5||n[f][l+1]===">")?(m(),s===3&&(r=r[0]),s=r,(r=r[0]).push(2,0,s),s=0):e===" "||e==="	"||e===`
`||e==="\r"?(m(),s=2):i+=e),s===3&&i==="!--"&&(s=4,r=r[0])}return m(),r}(o)),t),arguments,[])).length>1?t:t[0]}var b=(o,t,...n)=>(t===null&&(t={}),{tag:o,props:t,children:n}),j=x.bind(b);var w=(o,t)=>{for(let n in t)n[0]==="@"?o.addEventListener(n.slice(1),t[n]):o.setAttribute(n,t[n]);return o};function d(o){return o.map(t=>{if(typeof t=="object")if(Array.isArray(t)){let n=document.createDocumentFragment();if(t.length>=1){let e=d(t);for(let c of e)n.appendChild(c)}return n}else{let n;if(typeof t.tag=="string")n=document.createElement(t.tag);else{let e=t.tag;customElements.get(e.uniqueName)===void 0&&customElements.define(e.uniqueName,e),n=document.createElement(e.uniqueName)}if(n=w(n,t.props),t.children.length>=1){let e=d(t.children);for(let c of e)n.appendChild(c)}return n}else{let n=document.createDocumentFragment();return n.textContent=t,n}})}var g=o=>{let t=document.createDocumentFragment();Array.isArray(o)||(o=[o]);for(let n of d(o))t.appendChild(n);return t};var p=class extends HTMLElement{state={};root=this.attachShadow({mode:"open"});props={};isInited=!1;isEffected=!1;constructor(){super()}async connectedCallback(){for(let t of this.getAttributeNames())this.props[t]=this.getAttribute(t);await this.assign()}async assign(){let t=await this.render(this.props);this.root.innerHTML="",this.root.appendChild(g(t))}init(t){if(!this.isInited){this.isInited=!0;for(let n in t){let e="$"+n;Object.defineProperty(this,e,{get:()=>this.state[e],set:async c=>{this.state[e]=c,await this.assign()}}),this[e]=t[n]}}}async effect(t){this.isEffected||(await t(),this.isEffected=!0)}render(){}};h(p,"uniqueName","x-"+Math.random().toString(16).slice(2)+"-"+Math.random().toString(16).slice(2));var A=o=>{let t=class extends p{};return t.prototype.render=o,t};export{j as $,p as TMLElement,A as compact,g as compile,b as tag};
